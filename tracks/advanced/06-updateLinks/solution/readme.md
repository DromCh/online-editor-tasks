# updateLinks

–†–æ–∑–≤'—è–∑–∞–Ω–Ω—è —Ü—ñ—î—ó –∑–∞–¥–∞—á—ñ –º–æ–∂–µ –≤–∏–≥–ª—è–¥–∞—Ç–∏ –æ—Å—å —Ç–∞–∫:

```js
export const updateLinks = (string = "") => {
  // –Ø–∫—â–æ –Ω–µ –º–∞—î –∑–æ–≤–Ω—ñ—à–Ω—ñ—Ö –ø–æ—Å–∏–ª–∞–Ω—å, —Ç–æ
  if (!string.includes("target=")) {
    // –ø–æ–≤–µ—Ä–Ω—É—Ç–∏ —Å—Ç—Ä–æ–∫—É –æ–¥—Ä–∞–∑—É
    return string;
  }
  // –Ü–Ω–∞–∫—à–µ:
  let result = string
    // –æ–±–≥–æ—Ä–Ω—É—Ç–∏ –∞—Ç—Ä–∏–±—É—Ç target,
    .replaceAll("target=_blank", 'target="_blank"')
    // –æ–±–≥–æ—Ä–Ω—É—Ç–∏ –∞—Ç—Ä–∏–±—É—Ç rel
    .replaceAll("rel=noopener", 'rel="noopener"')
    // —ñ –¥–ª—è –≤—Å—ñ—Ö —Ç–µ–≥—ñ–≤ –ø–æ—Å–∏–ª–∞–Ω—å –¥–æ–¥–∞—Ç–∏ rel, –¥–µ –ø–æ—Ç—Ä—ñ–±–Ω–æ
    .replaceAll(
      /(<a.*\s*)(?<!rel="noopener"\s)(target="_blank")(\s*>)/g,
      '$1$2 rel="noopener"$3'
    );
  // –ü–æ–≤–µ—Ä–Ω—É—Ç–∏ –≤—ñ–¥—Ä–µ–¥–∞–≥–æ–≤–∞–Ω—É —Å—Ç–∞—Ç—Ç—é üéâ
  return result;
};
```

–†–æ–∑–±–µ—Ä–µ–º–æ —Ü–µ —Ä—ñ—à–µ–Ω–Ω—è.

–¢—É—Ç –∞–ª–≥–æ—Ä–∏—Ç–º —Ç—Ä–æ—Ö–∏ –∑–º—ñ–Ω–µ–Ω–∏–π, –≤ –ø–æ—Ä—ñ–≤–Ω—è–Ω–Ω—ñ –∑ —Ç–∏–º, —â–æ –¥–∞—î—Ç—å—Å—è –≤ –æ–ø–∏—Å—ñ. –°–ø–æ—á–∞—Ç–∫—É –º–∏ –ø–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ, —á–∏ —Ç—Ä–µ–±–∞ –≤–∑–∞–≥–∞–ª—ñ –æ–±—Ä–æ–±–ª—è—Ç–∏ —Å—Ç—Ä–æ–∫—É, —á–∏ –ø–æ–≤–µ—Ä–Ω—É—Ç–∏ —ó—ó –æ–¥—Ä–∞–∑—É. –ü–æ—Ç—ñ–º –º–∏ –∑–Ω–∞—Ö–æ–¥–∏–º–æ –≤—Å—ñ –∞—Ç—Ä–∏–±—É—Ç–∏ `target=_blank` (–±–æ —Ç—ñ–ª—å–∫–∏ —Ç–æ –Ω–∞–º —Ç—Ä–µ–±–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏) —ñ –¥–æ–¥–∞—î–º–æ –ª–∞–ø–∫–∏. –¢–µ –∂ —Å–∞–º–µ —Ä–æ–±–∏–º–æ –∑ –∞—Ç—Ä–∏–±—É—Ç–æ–º `rel=noopener`, —Ç–æ–º—É —â–æ –Ω–∞–º –≤—ñ–¥–æ–º–æ, —â–æ –≤—ñ–Ω –º–æ–∂–µ –±—É—Ç–∏ –ø—Ä–∏—Å—É—Ç–Ω—ñ–π –∞–ª–µ –±–µ–∑ –ª–∞–ø–æ–∫.

–¢–∞–∫–∏–º —á–∏–Ω–æ–º –º–∏ –æ—Ç—Ä–∏–º–∞–ª–∏ —Ñ—Ä–∞–≥–º–µ–Ω—Ç —Ç–µ–∫—Å—Ç—É –∑ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–∏–º–∏ –ª–∞–ø–∫–∞–º–∏ —ñ —Ç–æ–º—É –ø–æ—à—É–∫ –º—ñ—Å—Ü—å, –¥–µ —Ç—Ä–µ–±–∞ –¥–æ–¥–∞—Ç–∏ –ø—Ä–æ–ø—É—â–µ–Ω–∏–π –∞—Ç—Ä–∏–±—É—Ç `rel` —Å—Ç–∞–≤ –ø—Ä–æ—Å—Ç—ñ—à–∏–º. –í –ø—Ä–æ—Ç–∏–≤–Ω–æ–º—É —Ä–∞–∑—ñ, –Ω–∞–º –¥–æ–≤–µ–ª–æ—Å—è –± —à—É–∫–∞—Ç–∏ –≤–∞—Ä—ñ–∞–Ω—Ç–∏, –∫–æ–ª–∏ —ñ –∑ –ª–∞–ø–∫–∞–º–∏, —ñ –±–µ–∑.

–†–æ–∑–≥–ª—è–Ω–µ–º–æ —â–µ —Å–ø—Ä–æ—â–µ–Ω–Ω—è –¥–æ —Ä–µ–≥—É–ª—è—Ä–Ω–æ–≥–æ –≤–∏—Ä–∞–∑—É, —è–∫–∏–π –Ω–∞–º —Ç—Ä–µ–±–∞ —Å—Ç–≤–æ—Ä–∏—Ç–∏.

–û—Å–∫—ñ–ª—å–∫–∏ –º–∏ —Ç–æ—á–Ω–æ –∑–Ω–∞—î–º–æ, —â–æ –∞—Ç—Ä–∏–±—É—Ç target —ñ–¥–µ –∑–∞–≤–∂–¥–∏ –æ—Å—Ç–∞–Ω–Ω—ñ–º, —Ç–æ –ø—ñ—Å–ª—è –Ω—å–æ–≥–æ –≤–∂–µ –Ω–µ –±—É–¥–µ –Ω—ñ—á–æ–≥–æ –æ–∫—Ä—ñ–º –ø—Ä–æ–±—ñ–ª—ñ–≤ –∞–±–æ —Å—É–ø—É—Ç–Ω—å–æ–≥–æ –∞—Ç—Ä–∏–±—É—Ç—É `rel` –¥–æ –∫—ñ–Ω—Ü—è —Ç–µ–≥—É (–¥–æ –¥—É–∂–∫–∏ ">"). –û—Å–∫—ñ–ª—å–∫–∏ –ø—Ä–∏—Å—É—Ç–Ω—ñ—Å—Ç—å –∞—Ç—Ä–∏–±—É—Ç—É `rel` –≥–æ–≤–æ—Ä–∏—Ç—å –Ω–∞–º, —â–æ –±—ñ–ª—å—à –Ω—ñ—á–æ–≥–æ —Ç—É—Ç –º—ñ–Ω—è—Ç–∏ –Ω–µ —Ç—Ä–µ–±–∞, —Ç–æ —Ç–æ–º—É –Ω–∞–º —Ç—Ä–µ–±–∞ –∑–Ω–∞–π—Ç–∏ —Ç—ñ–ª—å–∫–∏ —Ç–∞–∫—ñ –∞—Ç—Ä–∏–±—É—Ç–∏ `target`, –ø—ñ—Å–ª—è —è–∫–∏—Ö —î —Ç—ñ–ª—å–∫–∏ –ø—Ä–æ–±—ñ–ª–∏.

```js
/target="_blank"\s*>/
```

–¢–∞–∫–∏–º —á–∏–Ω–æ–º, –Ω–∞–º –∑–∞–ª–∏—à–∏–ª–æ—Å—å –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Ç—ñ–ª—å–∫–∏ –¥—Ä—É–≥—É —É–º–æ–≤—É, —â–æ –±–µ–∑–ø–æ—Å–µ—Ä–µ–¥–Ω—å–æ –ø–µ—Ä–µ–¥ –∞—Ç—Ä–∏–±—É—Ç–æ–º `target` –Ω–µ –º—ñ—Å—Ç–∏—Ç—å—Å—è –∞—Ç—Ä–∏–±—É—Ç `rel` –∑ –æ–¥–Ω–∏–º —ñ —Å–∞–º–µ –æ–¥–Ω–∏–º –ø—Ä–æ–±—ñ–ª–æ–º. –î–ª—è —Ü—å–æ–≥–æ –Ω–∞–º –ø–æ—Ç—Ä—ñ–±–µ–Ω *Negative lookbehind assertion*, —â–æ –º–∞—î –≤–∏–≥–ª—è–¥ `(?<!y)x` —ñ –≤–∏–±–∏—Ä–∞—î "x", –ª–∏—à–µ —è–∫—â–æ –ø–µ—Ä–µ–¥ "x" –Ω–µ —Å—Ç–æ—ó—Ç—å "y".

```js
/(?<!rel="noopener"\s)target="_blank"\s*>/,
```

–ü—ñ—Å–ª—è —Ç–æ–≥–æ, —è–∫ –º–∏ –∑–Ω–∞–π—à–ª–∏ —Ç–∞–∫–∏–π —Ñ—Ä–∞–≥–º–µ–Ω—Ç, –Ω–∞–º –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ –∑–∞–ø–∞–º º—è—Ç–∞—Ç–∏ –≥—Ä—É–ø–∏ —Ç–µ–≥—É, –¥–ª—è —Ç–æ–≥–æ, —â–æ–± –∑—Ä–æ–±–∏—Ç–∏ –≤—ñ—Ä–Ω–µ –∑–∞–º—ñ—â–µ–Ω–Ω—è. –¢–æ –Ω–∞ –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ –¥–ª—è —Ç–æ–≥–æ, —â–æ–± —Ç—ñ–ª—å–∫–∏ —á–∞—Å—Ç–∏–Ω—É —Ç–µ–≥—É, –∞ –≤—Å–µ —ñ–Ω—à–µ - –Ω—ñ. –ì—Ä—É–ø—É–≤–∞–Ω–Ω—è –∑–¥—ñ–π—Å–Ω—é—î—Ç—å—Å—è –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é "()".

```js
/(<a.*\s*)(?<!rel="noopener"\s)(target="_blank")(\s*>)/
```

–¢–µ–ø–µ—Ä –º–∏ –º–æ–∂–µ–º–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —Ü—ñ –≥—Ä—É–ø–∏ (–∑–≥—ñ–¥–Ω–æ —ó—Ö –ø–æ—Ä—è–¥–∫–æ–≤–æ–º—É –Ω–æ–º–µ—Ä—É) –≤ —Ñ—Ä–∞–≥–º–µ–Ω—Ç—ñ –∑–∞–º—ñ–Ω–∏.

```js
'$1$2 rel="noopener"$3'
```

## –ö–æ—Ä–∏—Å–Ω—ñ –ø–æ—Å–∏–ª–∞–Ω–Ω—è

–ù–∞ —Å–∞–π—Ç—ñ [RegEx101](https://regex101.com/) –≤–∏ –º–æ–∂–µ—Ç–µ –ø—Ä–æ—Ç–µ—Å—Ç—É–≤–∞—Ç–∏ —Å–≤—ñ–π —Ä–µ–≥—É–ª—è—Ä–Ω–∏–π –≤–∏—Ä–∞–∑ —ñ –∑–º—ñ–Ω–∏—Ç–∏ –π–æ–≥–æ –∑–∞ –ø–æ—Ç—Ä–µ–±–∏
