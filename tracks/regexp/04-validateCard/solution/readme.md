# validateCard

Для того, щоб перевірити номер картки, потрібно використати регулярний вираз, який буде перевіряти формат номера картки. Наприклад, для MasterCard номер картки має бути довжиною 16 знаків, починається від 51 до 55. А для American Express номер картки має бути довжиною 15 знаків, починається з 34 або 37. Якщо номер картки відповідає одному з цих форматів, то він вважається валідним.

Розв'язання цієї задачі може виглядати ось так:

```js
const validateCard = (number = "") => {
  return /^(?:(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(3[47][0-9]{13}))$/.test(
    number
  );
};
```

Для вирішення задачі ми використовуємо [test()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp/test), щоб дізнатися, чи знайдено шаблон у рядку. Метод `test` повертає логічне значення, на відміну від методу [String.prototype.search()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/search), який повертає індекс збігу або -1, якщо не знайдено. Більш того, метод `test()`, викликаний кілька разів у тому самому екземплярі глобального регулярного виразу, використає попередній збіг.

Давайте розберемо цей регулярний вираз. Він складається з трьох частин, які розділені символом `|`:

1. `4[0-9]{12}(?:[0-9]{3})?` - для перевірки номера карток Visa
2. `5[1-5][0-9]{14}` - для перевірки MasterCard
3. `3[47][0-9]{13}` - перевіряє валідність номерів American Express

Кожна з цих частин починається з `^` і закінчується `$`. Це означає, що вони повинні збігатися з початком і кінцем рядка. Це необхідно, щоб виключити випадки, коли номер картки містить додаткові символи, наприклад, `4111111111111111!`.

Розберемо перший приклад для карток Visa. Він починається з `4`, а потім має бути 12 цифр (`[0-9]` інтервал від 0 до 9, які повторюються 12 разів `{12}`), а потім може бути ще 3 цифри. Все це повторюється один раз або нічого. Це означає, що номер картки може бути довжиною 13 або 16 знаків. Позначка `(?:x)` означає "Група без захоплення". Тобто відповідає "x", але не запам'ятовує збіг. Зібраний підрядок не можна викликати з елементів результуючого масиву ([1], …, [n]) або з попередньо визначених властивостей об’єкта RegExp ($1, …, $9).

Другий приклад містить перевірку для MasterCard. Він починається з `5`, а потім має бути одна з цифр від 1 до 5 (`[1-5]`), а далі 14 цифр (`[0-9]{14}`).

Третій приклад з American Express дуже схожий на попередній. Він починається з `3`, а потім має бути одна з цифр `4` або `7` (`[47]`), а потім 13 цифр (`[0-9]{13}`).

Регулярний вираз лише перевірить формат введеного значення – наприклад, регулярний вираз не може обчислити контрольну цифру номера CC, що також слід зробити. Ми повинні зробити мінімальну перевірку на клієнті та дозволити нашому серверному платіжному процесору виконувати фактичну перевірку та перевірку чисел. А як то зробити на сервері -читайте за посиланнями нижче.

## Корисні посилання

1. [Алгоритм Луна](https://uk.wikipedia.org/wiki/Алгоритм_Луна)
