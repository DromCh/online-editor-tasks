# textCutter

–†–æ–∑–≤'—è–∑–∞–Ω–Ω—è —Ü—ñ—î—ó –∑–∞–¥–∞—á—ñ –º–æ–∂–µ –≤–∏–≥–ª—è–¥–∞—Ç–∏ –æ—Å—å —Ç–∞–∫:

```js
export const textCutter = (string = "", n = 0) => {
  if (string.length <= n) {
    return string;
  }

  let acc = 0;
  const targetLength = n - 3;
  const words = string.split(" ");
  const textCut = [];
  words.forEach((w) => {
    if (acc + w.length <= targetLength) {
      textCut.push(w);
      acc += w.length;
    }
  }, 0);

  let res = textCut.join(" ");
  if (res.slice(-1) === "." || res.slice(-1) === ",") {
    res = res.slice(0, -1);
  }

  return res + "...";
};
```

## –ê–ª–≥–æ—Ä–∏—Ç–º –¥—ñ–π:

1. –Ø–∫—â–æ –∑–∞–¥–∞–Ω–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞ –¥–æ–≤–∂–∏–Ω–∞ —Ñ—Ä–∞–≥–º–µ–Ω—Ç—É –Ω–µ –º–µ–Ω—à–µ —Ç–µ–∫—Å—Ç—É, —Ç–æ –ø–æ–≤–µ—Ä–Ω—É—Ç–∏ –≤–µ—Å—å —Ç–µ–∫—Å—Ç —Ü—ñ–ª–∫–æ–º
1. –Ü–Ω–∞–∫—à–µ –¥–æ–¥–∞–≤–∞—Ç–∏ –ø–æ –æ–¥–Ω–æ–º—É —Å–ª–æ–≤—É —É —Ñ—Ä–∞–≥–º–µ–Ω—Ç –¥–æ —Ç–∏—Ö –ø—ñ—Ä, –ø–æ–∫–∏ –Ω–µ –¥–æ—Å—è–≥–Ω—É—Ç–æ —Ü—ñ–ª—å–æ–≤–æ—ó –¥–æ–≤–∂–∏–Ω–∏
1. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏, —â–æ —É –æ—Ç—Ä–∏–º–∞–Ω–æ–º—É —Ñ—Ä–∞–≥–º–µ–Ω—Ç—ñ –Ω–µ–º–∞—î –≤–∏—Å—è—á–∏—Ö –∑–Ω–∞–∫—ñ–≤ –ø—É–Ω–∫—Ç—É–∞—Ü—ñ—ó
1. –ü–æ–≤–µ—Ä–Ω—É—Ç–∏ —Ñ—Ä–∞–≥–º–µ–Ω—Ç, –¥–æ–¥–∞–≤—à–∏ —Ç—Ä–∏ –∫—Ä–∞–ø–∫–∏ –≤ –∫—ñ–Ω–µ—Ü—å —Ñ—Ä–∞–≥–º–µ–Ω—Ç—É

–†–æ–∑–≥–ª—è–Ω–µ–º–æ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—é –∞–ª–≥–æ—Ä–∏—Ç–º—É –≤ –∫–æ–¥—ñ. –î–ª—è –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –ø–µ—Ä—à–æ–≥–æ –ø—É–Ω–∫—Ç—É, –Ω–∞–º –¥–æ—Å—Ç–∞—Ç–Ω—å–æ –Ω–∞—Å—Ç—É–ø–Ω–æ–≥–æ –∫–æ–¥—É:

```js
export const textCutter = (string = "", n = 0) => {
  // –Ø–∫—â–æ –∑–∞–¥–∞–Ω–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞ –¥–æ–≤–∂–∏–Ω–∞ —Ñ—Ä–∞–≥–º–µ–Ω—Ç—É –Ω–µ –º–µ–Ω—à–µ —Ç–µ–∫—Å—Ç—É
  if (string.length <= n) {
    // –¢–æ –ø–æ–≤–µ—Ä–Ω—É—Ç–∏ –≤–µ—Å—å —Ç–µ–∫—Å—Ç —Ü—ñ–ª–∫–æ–º
    return string;
  }
}
```

–¢–µ–ø–µ—Ä —Ä–æ–∑–≥–ª—è–Ω–µ–º–æ –Ω–∞—Å—Ç—É–ø–Ω–∏–π –ø—É–Ω–∫—Ç –∞–ª–≥–æ—Ä–∏—Ç–º—É. –î–ª—è —ñ—Ç–µ—Ä—É–≤–∞–Ω–Ω—è —Å–ª—ñ–≤ —É –≤–∏—Ö—ñ–¥–Ω–æ–º—É —Ç–µ–∫—Å—Ç—ñ –º–æ–∂–Ω–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ —Ü–∏–∫–ª `for` —ñ —à—É–∫–∞—Ç–∏ —Å–∏–º–≤–æ–ª –ø—Ä–æ–±—ñ–ª—É " ", –∞–±–æ –∂ —Å–∫–æ—Ä–∏—Å—Ç—É–≤–∞—Ç–∏—Å—è –º–µ—Ç–æ–¥–æ–º —Å—Ç—Ä–æ–∫–∏ `split`, –∑ —è–∫–æ–≥–æ –æ—Ç—Ä–∏–º–∞—Ç–∏ –º–∞—Å–∏–≤ —Å–ª—ñ–≤ —ñ –ø—Ä–∞—Ü—é–≤–∞—Ç–∏ –∑ –Ω–∏–º (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é –º–µ—Ç–æ–¥—É `forEach`). –ü—ñ—Å–ª—è —Ç–æ–≥–æ, —è–∫ —Ñ—Ä–∞–≥–º–µ–Ω—Ç –Ω–∞–±–µ—Ä–µ –Ω–µ–æ–±—Ö—ñ–¥–Ω—É –∫—ñ–ª—å–∫—ñ—Å—Ç—å —Å–ª—ñ–≤, –∑–Ω–æ–≤—É –æ–± º—î–¥–Ω–∞—î–º–æ –π–æ–≥–æ —É —Å—Ç—Ä–æ–∫—É –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é –º–µ—Ç–æ–¥–∞ `join`.

```js
export const textCutter = (string = "", n = 0) => {
  if (string.length <= n) {
    return string;
  }

  // –Ü–Ω–∞–∫—à–µ –æ–±—Ä–æ–±–∏—Ç–∏ —Ç–µ–∫—Å—Ç –Ω–∞—Å—Ç—É–ø–Ω–∏–º —á–∏–Ω–æ–º
  let acc = 0; // –¢—É—Ç –∑–±–µ—Ä—ñ–≥–∞—î–º–æ –¥–æ–≤–∂–∏–Ω—É —Ñ—Ä–∞–≥–º–µ–Ω—Ç—É
  const targetLength = n - 3; // –¶–µ –Ω–∞—à–∞ —Ü—ñ–ª—å–æ–≤–∞ –¥–æ–≤–∂–∏–Ω–∞: –º—ñ–Ω—É—Å –∫—Ä–∞–ø–∫–∏
  const words = string.split(" "); // –ü—Ä–∞—Ü—é–≤–∞—Ç–∏ –±—É–¥–µ–º–æ –∑ –º–∞—Å–∏–≤–æ–º —Å–ª—ñ–≤
  const textCut = []; // –¢—É—Ç –∑–±–µ—Ä—ñ–≥–∞—î–º–æ –æ—Ç—Ä–∏–º–∞–Ω–∏–π —Ñ—Ä–∞–≥–º–µ–Ω—Ç
  words.forEach((w) => { // –î–ª—è –∫–æ–∂–Ω–æ–≥–æ —Å–ª–æ–≤–∞ –∑ —Ç–µ–∫—Å—Ç—É
    // –Ø–∫—â–æ –¥–æ–≤–∂–∏–Ω–∞ –æ—Ç—Ä–∏–º–∞–Ω–æ–≥–æ —Ñ—Ä–∞–≥–º–µ–Ω—Ç—É –Ω–µ –ø–µ—Ä–µ–≤–∏—â—É—î —Ü—ñ–ª—å–æ–≤—É,
    if (acc + w.length <= targetLength) {
      textCut.push(w); // –¥–æ–¥–∞—Ç–∏ —Ü–µ —Å–ª–æ–≤–æ —É —Ñ—Ä–∞–≥–º–µ–Ω—Ç —ñ
      acc += w.length; // –≤—Ä–∞—Ö—É–≤–∞—Ç–∏ –≤ –∑–∞–≥–∞–ª—å–Ω—É –¥–æ–≤–∂–∏–Ω—É —Ñ—Ä–∞–≥–º–µ–Ω—Ç—É
    }
  }, 0);
  // –û–± º—î–¥–Ω–∞—Ç–∏ –æ—Ç—Ä–∏–º–∞–Ω–∏–π —Ñ—Ä–∞–≥–º–µ–Ω—Ç –≤ —Å—Ç—Ä–æ–∫—É
  let res = textCut.join(" ");
};
```

–û—Å—Ç–∞–Ω–Ω—ñ –¥–≤–∞ –∫—Ä–æ–∫–∏ –∞–ª–≥–æ—Ä–∏—Ç–º—É –≤ —Ç–æ–º—É, —â–æ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ "–≤–∏—Å—è—á—ñ" –∑–Ω–∞–∫–∏ –ø—É–Ω–∫—Ç—É–∞—Ü—ñ—ó. –î–ª—è —Ü—å–æ–≥–æ –Ω–∞–º –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –æ—Å—Ç–∞–Ω–Ω—ñ–π —Å–∏–º–≤–æ–ª —Ñ—Ä–∞–≥–º–µ–Ω—Ç—É, —á–∏ —Ç–∞–º —î "." –∞–±–æ "," —ñ–∑ –∑–∞–≤–¥–∞–Ω–Ω—è. –Ø–∫—â–æ —î, —Ç–æ –ø—Ä–∏–±—Ä–∞—Ç–∏ —ó—ó. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –º–æ–∂–Ω–∞ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é –º–µ—Ç–æ–¥—É —Å—Ç—Ä–æ–∫–∏ `charAt` –∞–±–æ, –∑–Ω–∞–π–æ–º–∏–º –ø–æ –º–∏–Ω—É–ª–∏–º –∑–∞–¥–∞—á–∞–º, –º–µ—Ç–æ–¥–æ–º `slice`. –î–∞–ª—ñ –Ω–µ–º –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ –¥–æ–¥–∞—Ç–∏ –¥–æ –æ—Ç—Ä–∏–º–∞–Ω–æ–≥–æ —Ñ—Ä–∞–≥–º–µ–Ω—Ç—É —Ç—Ä–∏ –∫—Ä–∞–ø–∫–∏ "..." –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é –º–µ—Ç–æ–¥—É `concat` –∞–±–æ –∂ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞ "+", —è–∫–∏–π –¥–ª—è –Ω–∞—à–æ–≥–æ –≤–∏–ø–∞–¥–∫—É —Ä–æ–±–∏—Ç—å —Ç–µ —Å–∞–º–µ.

```js
export const textCutter = (string = "", n = 0) => {
  if (string.length <= n) {
    return string;
  }
  
  let acc = 0;
  const targetLength = n - 3;
  const words = string.split(" ");
  const textCut = [];
  words.forEach((w) => {
    if (acc + w.length <= targetLength) {
      textCut.push(w);
      acc += w.length;
    }
  }, 0);
  let res = textCut.join(" ");

  // –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏, —â–æ –Ω–µ–º–∞—î –≤–∏—Å—è—á–∏—Ö –∑–Ω–∞–∫—ñ–≤ –ø—É–Ω–∫—Ç—É–∞—Ü—ñ—ó
  if (res.slice(-1) === "." || res.slice(-1) === ",") {
    // —ñ —è–∫—â–æ —î, —Ç–æ –≤—ñ–¥—Ä—ñ–∑–∞—Ç–∏ –æ—Å—Ç–∞–Ω–Ω—ñ–π —Å–∏–º–≤–æ–ª
    res = res.slice(0, -1);
  }
  // –ü–æ–≤–µ—Ä–Ω—É—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∑ —Ç—Ä—å–æ–º–∞ –∫—Ä–∞–ø–∫–∞–º–∏ –Ω–∞–ø—Ä–∏–∫—ñ–Ω—Ü—ñ
  return res + "...";
};
```

–ù–∞—à–µ —Ä—ñ—à–µ–Ω–Ω—è –ø—Ä–∞—Ü—é—î, –∞–ª–µ –π–æ–≥–æ –º–æ–∂–Ω–∞ —Ç—Ä–æ—Ö–∏ –æ–ø—Ç–∏–º—ñ–∑—É–≤–∞—Ç–∏. –Ø–∫—â–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ –º–µ—Ç–æ–¥ `reduce` –¥–ª—è —ñ—Ç–µ—Ä—É–≤–∞–Ω–Ω—è, –ª–∞–Ω—Ü—é–∂–∫–∏ –æ–±—Ä–æ–∫–∏ —Ç–∞ —Ä–µ–≥—É–ª—è—Ä–Ω—ñ –≤–∏—Ä–∞–∑–∏, —Ç–æ —Ä—ñ—à–µ–Ω–Ω—è —Å—Ç–∞–Ω–µ –∫–æ—Ä–æ—Ç—à–∏–º —Ç–∞ –±—ñ–ª—å—à –µ–ª–µ–≥–∞–Ω—Ç–Ω–∏–º ü§ó

**–£–≤–∞–≥–∞:** –ù–µ–¥–æ–ª—ñ–∫–æ–º —Ü—å–æ–≥–æ –ø—ñ–¥—Ö–æ–¥—É –±—É–¥–µ –∑–Ω–∞—á–Ω–æ –±—ñ–ª—å—à–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –ø–∞–º º—è—Ç—ñ, –±–æ –º–µ—Ç–æ–¥ `reduce` –±—É–¥–µ —Ä–æ–±–∏—Ç–∏ –∫–æ–ø—ñ—é –º–∞—Å–∏–≤—É –Ω–∞ –∫–æ–∂–Ω—ñ–π —ñ—Ç–µ—Ä–∞—Ü—ñ—ó.

```js
export const textCutter = (string = "", n = 0) => {
  // –ù–∞ –ø–æ—á–∞—Ç–∫—É, –ø–µ—Ä–µ–≤—ñ—Ä–∏–º–æ —á–∏ –≤–∑–∞–≥–∞–ª—ñ —Ç—Ä–µ–±–∞ —â–æ—Å—å —Ä–æ–±–∏—Ç–∏
  if (string.length <= n) {
    return string;
  }
  // –Ø–∫—â–æ —Ç—Ä–µ–±–∞, —Ç–æ —Ç–æ–¥—ñ
  return (
    string
      // –†–æ–∑–¥—ñ–ª–∏–º–æ –Ω–∞ —Å–ª–æ–≤–∞
      .split(" ")
      // –î–ª—è –∫–æ–∂–Ω–æ–≥–æ —Å–ª–æ–≤–∞ –∑ —Ç–µ–∫—Å—Ç—É
      .reduce(
        (acc, w) => {
          // –Ø–∫—â–æ –¥–æ–≤–∂–∏–Ω–∞ –æ—Ç—Ä–∏–º–∞–Ω–æ–≥–æ —Ñ—Ä–∞–≥–º–µ–Ω—Ç—É –Ω–µ –ø–µ—Ä–µ–≤–∏—â—É—î —Ü—ñ–ª—å–æ–≤—É,
          if (acc[1] + w.length <= n - 3) {
            // –∑–∞–ø–∏—Å–∞—Ç–∏ —Ç–µ —Å–ª–æ–≤–æ —ñ –∑–±—ñ–ª—å—à–∏—Ç–∏ –ª—ñ—á–∏–ª—å–Ω–∏–∫ –¥–æ–≤–∂–∏–Ω–∏ —Ñ—Ä–∞–≥–º–µ–Ω—Ç—É,
            return [[...acc[0], w], (acc[1] += w.length)];
          }
          // —ñ–Ω–∞–∫—à–µ –∑–∞–ø–∞–º º—è—Ç–∞—Ç–∏ —Ü–µ–π —Ñ—Ä–∞–≥–º–µ–Ω—Ç
          return acc;
        },
        [[], 0]
      )[0]
      // –û–± º—î–¥–Ω–∞—Ç–∏ –æ—Ç—Ä–∏–º–∞–Ω–∏–π —Ñ—Ä–∞–≥–º–µ–Ω—Ç –≤ —Å—Ç—Ä–æ–∫—É
      .join(" ")
      // –î–æ–¥–∞—Ç–∏ –¥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É —Ç—Ä–∏ –∫—Ä–∞–ø–∫–∏ –Ω–∞–ø—Ä–∏–∫—ñ–Ω—Ü—ñ
      .concat("...")
      // –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏, —â–æ –Ω–µ–º–∞—î –≤–∏—Å—è—á–∏—Ö –∑–Ω–∞–∫—ñ–≤ –ø—É–Ω–∫—Ç—É–∞—Ü—ñ—ó —ñ –ø–æ–≤–µ—Ä–Ω—É—Ç–∏
      .replace(/,\.\.\.|\.\.\.\./, "...")
  );
};
```

## –ö–æ—Ä–∏—Å–Ω—ñ –ø–æ—Å–∏–ª–∞–Ω–Ω—è

[String.prototype.slice](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/slice)

[String.prototype.split](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/split)

[Array.prototype.join](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/join)

[Array.prototype.forEach](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/forEach)

[String.prototype.concat](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/concat)

[for...of](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/for...of#iterating_over_a_string)
